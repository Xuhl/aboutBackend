# 分布式系统理论
## 一致性理论
### Quoram 机制
1. WARO (WRITE-ALL-READ-ONE) 是一种最简单的副本控制机制。所有副本写成功后，才能算作成功，从而保证了副本上的一致性；牺牲了更新服务的可用性，增强了服务的可读性
2. 对于N个节点的服务，W 为写入成功的节点数，R 是读取成功的节点数，只要保证 W+R> N ,即可保证数据读取的一致性，这就是Quoram机制。通过这种折中，提升了系统的可用性
3. 仅仅依靠Quoram 机制是无法保障数据的一致性。

## 分布式事务
分布式事务协议，目前业界主流的包括 '2PC','3PC','XA','TCC' 以及依据可靠消息的最终一致性解决方案。
### 2PC 事务
1. `2PC` 事务中包括 `coordinator` 以及`participentor` 
2. 流程包括： 投票阶段以提交就阶段
3. 主要应用场景：单体应用跨库的执行事务，这里又违反了微服务的设计原则
4. 优点：较强的一致性；业界有相关标准实现（XA事务）
5. 缺点：容错性差，并发不足，在投票阶段就要求锁定资源
